import{r as i,W as j,j as e,S as C,N as h}from"./index-C6u3a3Ga.js";const g=()=>{const t=i.useContext(j);if(t===void 0)throw new Error("useWeather must be used within a WeatherProvider");return t},N="_PageNav_es1zz_1",w={PageNav:N},S="_geoCurrent_11m27_1",b="_geoCurrentHid_11m27_15",y={geoCurrent:S,geoCurrentHid:b};function $(t=null){const[o,n]=i.useState(!1),[r,s]=i.useState(t),[l,c]=i.useState(null);function d(){if(!navigator.geolocation)return c("Your browser does not support geolocation");n(!0),navigator.geolocation.getCurrentPosition(a=>{s({lat:a.coords.latitude,lng:a.coords.longitude}),n(!1)},a=>{c(a.message),n(!1)})}return{isLoading:o,position:r,error:l,getPosition:d}}function E(){const{position:t,getPosition:o}=$(),{dispatch:n}=g(),[r,s]=i.useState(!1),[l,c]=i.useState("Use GeoLocation"),d="463e237f66c64661bc494d3b007392d4";function a(){o()}return i.useEffect(()=>{async function _(){s(!0);try{const m=await(await fetch(`https://api.geoapify.com/v1/geocode/reverse?lat=${t.lat}&lon=${t.lng}&format=json&apiKey=${d}`)).json();if(!m.results)throw new Error("Location not found");const{city:u,country:v}=m.results.at(0);n({type:"city/loaded",payload:e.jsxs(e.Fragment,{children:[e.jsxs("li",{children:["City: ",u," "]})," ",e.jsxs("li",{children:["Country: ",v," "]})," "]})}),c(e.jsxs(e.Fragment,{children:[e.jsxs("li",{children:["City: ",u," "]})," ",e.jsxs("li",{children:["Country: ",v," "]})," "]})),n({type:"finalLocation/submited",payload:u}),n({type:"location/changed",payload:u})}catch(p){console.error(p)}finally{s(!1)}}t!=null&&_()},[t,n]),r?e.jsx(C,{small:!0}):e.jsx("div",{onClick:a,className:`${l==="Use GeoLocation"?y.geoCurrent:y.geoCurrentHid} `,children:l})}const L="_input_qd5vk_1",k="_form_qd5vk_25",x={input:L,form:k},P="_btn_8h3if_1",M={btn:P};function T({children:t}){return e.jsx("button",{className:M.btn,children:t})}function H(){const{location:t,handleLocationChange:o,handleSubmit:n}=g();return e.jsxs("form",{className:x.form,onSubmit:n,children:[e.jsx("input",{className:x.input,type:"text",placeholder:"Search from location",value:t,onChange:o,id:"searchNav"}),e.jsx(T,{children:"Search"})]})}const U="_btn_1mc2l_1",I={btn:U};function W(){const{weather:t,dispatch:o,weatherUnit:n,weatherCode:r}=g(),s=t.current!==void 0?Math.round(t.current.temperature_2m):0,l=t.current!==void 0?Math.round(s*9/5+32):0,c=t.current!==void 0?Math.round(t.current.wind_speed_10m):0,d=t.current!==void 0?Math.round(c*.621371):0;function a(){o(n==="celsius"?{type:"weather/update",payload:{weather:t,weatherCode:r,temp:`${l}F°`,wind:`${d}mph`,windUnit:"miles",weatherUnit:"fahrenheit"}}:{type:"weather/update",payload:{weather:t,weatherCode:r,wind:`${c}km/h`,temp:`${s}C°`,windUnit:"kilometers",weatherUnit:"celsius"}})}return e.jsxs("div",{children:["CONVERT UNITS C/F km/m"," ",e.jsx("button",{className:I.btn,onClick:a,children:"Convert"})]})}function A(){return e.jsxs("div",{className:w.PageNav,children:[e.jsx(E,{}),e.jsx(H,{}),e.jsx(W,{})]})}const R="_nav_6gqa5_1",q="_hideNav_6gqa5_21",F="_isToday_6gqa5_115",f={nav:R,hideNav:q,isToday:F};function K({isToday:t}){const[o,n]=i.useState(!1),r=()=>{n(!0)},s=()=>{n(!1)};return e.jsxs("ul",{onMouseEnter:r,onMouseLeave:s,className:`${o?f.nav:f.hideNav} ${t&&f.isToday}`,children:[e.jsx("li",{children:e.jsx(h,{to:"/",children:"Home"})}),e.jsx("li",{children:e.jsx(h,{to:"/today",children:"Weather Today"})}),e.jsx("li",{children:e.jsx(h,{to:"/week",children:"Weather This Week"})})]})}export{K as A,A as P,g as u};
